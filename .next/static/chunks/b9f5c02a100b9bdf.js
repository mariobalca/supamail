(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,8896,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278);var s=e.i(20755);let a=async()=>{let e=(0,s.createClient)(),{data:t,error:a}=await e.from("aliases").select("*").order("created_at",{ascending:!1});if(a)throw a;return t||[]},l=async e=>{let t=(0,s.createClient)(),{data:{user:a}}=await t.auth.getUser();if(!a)throw Error("Not authenticated");let{data:l,error:i}=await t.from("aliases").insert({address:e,user_id:a.id}).select().single();if(i)throw i;return l},i=async(e,t)=>{let a=(0,s.createClient)(),{error:l}=await a.from("aliases").update({is_active:t}).eq("id",e);if(l)throw l},r=async e=>{let t=(0,s.createClient)(),{error:a}=await t.from("aliases").delete().eq("id",e);if(a)throw a},c=async()=>{let e=(0,s.createClient)(),{data:t,error:a}=await e.from("rules").select("*, aliases(address)").order("created_at",{ascending:!1});if(a)throw a;return t},d=async(e,t,a)=>{let l=(0,s.createClient)(),{data:i,error:r}=await l.from("rules").insert({alias_id:e,pattern:t,action:a}).select().single();if(r)throw r;return i},n=async e=>{let t=(0,s.createClient)(),{error:a}=await t.from("rules").delete().eq("id",e);if(a)throw a},o=async()=>{let e=(0,s.createClient)(),{data:t,error:a}=await e.from("logs").select("*, aliases(address)").order("created_at",{ascending:!1});if(a)throw a;return t};e.s(["createAlias",0,l,"createRule",0,d,"deleteAlias",0,r,"deleteRule",0,n,"getAliases",0,a,"getAllRules",0,c,"getLogs",0,o,"toggleAliasStatus",0,i],8896)},95468,73884,e=>{"use strict";var t=e.i(75254);let s=(0,t.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>s],95468);let a=(0,t.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>a],73884)},96135,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(27516),l=e.i(55436),i=e.i(63488),r=e.i(31278),c=e.i(95468),d=e.i(73884);let n=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var o=e.i(8896);function x(){let[e,x]=(0,s.useState)([]),[m,h]=(0,s.useState)(!0),[p,u]=(0,s.useState)("");(0,s.useEffect)(()=>{g()},[]);let g=async()=>{try{let e=await (0,o.getLogs)();x(e)}catch(e){console.error("Error fetching logs:",e)}finally{h(!1)}},f=e.filter(e=>e.sender.toLowerCase().includes(p.toLowerCase())||e.subject?.toLowerCase().includes(p.toLowerCase())||e.aliases?.address.toLowerCase().includes(p.toLowerCase()));return(0,t.jsxs)("div",{className:"space-y-10 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-4xl font-black text-slate-900 tracking-tight mb-2",children:"Activity"}),(0,t.jsx)("p",{className:"text-slate-500 font-medium",children:"Monitor your incoming email traffic and AI insights."})]}),(0,t.jsx)("button",{onClick:g,className:"flex items-center gap-2 bg-white text-slate-900 px-5 py-2.5 rounded-xl font-bold border border-slate-200 hover:bg-slate-50 transition-all shadow-sm active:scale-95",children:"Refresh Feed"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-slate-50 flex items-center justify-between bg-white sticky top-0 z-10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 bg-slate-50 border border-slate-200 px-4 py-2 rounded-xl w-80 group focus-within:border-indigo-300 transition-all",children:[(0,t.jsx)(l.Search,{className:"w-4 h-4 text-slate-400 group-focus-within:text-indigo-500"}),(0,t.jsx)("input",{type:"text",placeholder:"Search sender, subject, or alias...",className:"bg-transparent border-none outline-none text-sm w-full font-medium placeholder:text-slate-400",value:p,onChange:e=>u(e.target.value)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),(0,t.jsx)("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Forwarded"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-rose-500"}),(0,t.jsx)("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Blocked"})]})]})]}),(0,t.jsx)("div",{className:"divide-y divide-slate-50",children:m?(0,t.jsxs)("div",{className:"p-20 flex flex-col items-center justify-center text-slate-400 gap-4",children:[(0,t.jsx)(r.Loader2,{className:"w-8 h-8 animate-spin text-indigo-500"}),(0,t.jsx)("p",{className:"font-medium",children:"Fetching activity logs..."})]}):0===f.length?(0,t.jsxs)("div",{className:"p-20 flex flex-col items-center justify-center text-slate-400 gap-4 text-center",children:[(0,t.jsx)("div",{className:"bg-slate-50 p-4 rounded-full",children:(0,t.jsx)(a.History,{className:"w-8 h-8 opacity-20"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-slate-900",children:"No activity yet"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"Emails sent to your aliases will appear here."})]})]}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-slate-50/50",children:[(0,t.jsx)("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Sender & Subject"}),(0,t.jsx)("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Alias"}),(0,t.jsx)("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"AI Summary"}),(0,t.jsx)("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right",children:"Time"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-50",children:f.map(e=>(0,t.jsxs)("tr",{className:"group hover:bg-slate-50/50 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-6 vertical-top",children:(0,t.jsx)("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shadow-sm ${"forwarded"===e.status?"bg-emerald-50 text-emerald-600":"bg-rose-50 text-rose-600"}`,children:"forwarded"===e.status?(0,t.jsx)(c.CheckCircle2,{size:20}):(0,t.jsx)(d.XCircle,{size:20})})}),(0,t.jsx)("td",{className:"px-6 py-6",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1 max-w-md",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("span",{className:"text-sm font-black text-slate-900 truncate",children:e.sender})}),(0,t.jsx)("span",{className:"text-xs font-medium text-slate-500 line-clamp-1",children:e.subject||"(No Subject)"})]})}),(0,t.jsx)("td",{className:"px-6 py-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-indigo-600",children:[(0,t.jsx)(i.Mail,{size:14,className:"opacity-50"}),(0,t.jsx)("span",{className:"text-xs font-bold",children:e.aliases?.address})]})}),(0,t.jsx)("td",{className:"px-6 py-6",children:e.ai_summary?(0,t.jsx)("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg bg-indigo-50 border border-indigo-100 text-indigo-700 text-[10px] font-black uppercase tracking-tight",children:e.ai_summary}):(0,t.jsx)("span",{className:"text-slate-300 text-[10px] font-bold uppercase tracking-widest italic",children:"N/A"})}),(0,t.jsx)("td",{className:"px-6 py-6 text-right",children:(0,t.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,t.jsx)("span",{className:"text-xs font-black text-slate-900",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,t.jsx)("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-tighter",children:new Date(e.created_at).toLocaleDateString()})]})})]},e.id))})]})})})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"bg-slate-900 p-10 rounded-[2.5rem] text-white overflow-hidden relative group",children:[(0,t.jsxs)("div",{className:"relative z-10 flex items-center gap-6",children:[(0,t.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-white/10 flex items-center justify-center text-indigo-400 group-hover:scale-110 transition-transform",children:(0,t.jsx)(a.History,{size:28})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-xl font-black mb-1 tracking-tight",children:"Real-time Activity"}),(0,t.jsx)("p",{className:"text-slate-400 text-sm font-medium leading-relaxed",children:"Your dashboard is connected to live updates. New emails will appear here instantly."})]})]}),(0,t.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/10 blur-[100px] rounded-full"})]}),(0,t.jsxs)("div",{className:"bg-indigo-600 p-10 rounded-[2.5rem] text-white overflow-hidden relative group",children:[(0,t.jsxs)("div",{className:"relative z-10 flex items-center gap-6 text-white",children:[(0,t.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-white/20 flex items-center justify-center text-white group-hover:rotate-12 transition-transform",children:(0,t.jsx)(n,{size:28})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-xl font-black mb-1 tracking-tight",children:"Selective Forwarding"}),(0,t.jsx)("p",{className:"text-white/70 text-sm font-medium leading-relaxed",children:"Only allowed senders reach your inbox. Everything else is logged and blocked."})]})]}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 w-48 h-48 bg-white/10 blur-[80px] rounded-full"})]})]})]})}e.s(["default",()=>x],96135)}]);